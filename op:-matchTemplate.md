[OpenCV matchTemplate](http://docs.opencv.org/modules/imgproc/doc/object_detection.html#matchtemplate) wrapper with FireSight extensions. 

Correlation-based template matching is quite powerful. The frequency spectrum of a template is multiplied by the frequency spectrum of an image to obtain the correlation. Maxima (or minima, depending on the method) indicate the candidates for matching. If the images to be recognized are all in a flat plane orthogonal to the camera, there is little or no need to account for perspective skew or near/far size adjustments. For this reason, matchTemplate alone can be used quite effectively in a great majority pick-and-place use cases.

* **method** Default is `CV_TM_CCOEFF_NORMED`. 

###### FireSight extensions
* **output** Image for stage output. Default is `current`, which displays working image. To use input image, use `input`; to see correlation image, use `corr`.
* **threshold** If **maxVal** is below this value, then no matches will be reported
* **corr** Normalized recognition threshold in the interval [0,1]. Used to determine best match of candidates. For CV_TM_CCOEFF, CV_TM_CCOEFF_NORMED, CV_TM_CCORR, and CV_TM_CCORR_NORMED methods, this is a minimum threshold. For all other methods, it is a minimum threshold.

#### Model
<pre>
{
    "maxVal":0.97696870565414429,
    "rects":[
      {
        "x":467.0,
        "y":68.0,
        "width":29.0,
        "height":37.0,
        "angle":0.0,
        "corr":1.0
      },
      {
        "x":518.0,
        "y":69.0,
        "width":29.0,
        "height":37.0,
        "angle":0.0,
        "corr":0.99414855241775513
      },
      {
        "x":711.0,
        "y":71.0,
        "width":29.0,
        "height":37.0,
        "angle":0.0,
        "corr":0.99687016010284424
      },
      {
        "x":760.0,
        "y":71.0,
        "width":29.0,
        "height":37.0,
        "angle":0.0,
        "corr":0.99490123987197876
      }
    ]
  }
</pre>
* **maxVal** The maximum value in the correlation matrix
* **rects** The RotatedRect values of the matched positions
* **x** Center x
* **y** Center y
* **height** Height of rectangle 
* **width** Widht of rectangle
* **corr** Normalized correlation over the interval [0,1], with respect to **maxVal**

#### Example: Find 37x29 rectangles in a pcb image [pipeline](https://github.com/firepick1/FireSight/blob/master/json/matchCCOEFF_NORMED.json)
<pre>firesight -i img/pcb.jpg -p json/matchCCOEFF_NORMED.json -o target/matchCCOEFF_NORMED.jpg</pre>
###### Input image
<img src="https://github.com/firepick1/FireSight/blob/master/img/pcb.jpg?raw=true">

###### Template
The template is remarkably simple and can even be generated by the pipeline. it consists of a simple rectangle of the desired size:

<img src="https://github.com/firepick1/FireSight/blob/master/img/tmplt-37x29.jpg?raw=true">

###### Matched rectangles
<img src="https://github.com/firepick1/FireSight/blob/master/img/matchCCOEFF_NORMED-input.jpg?raw=true">

###### Correlation output
Bright spots in the correlation image correspond to matches:

<img src="https://github.com/firepick1/FireSight/blob/master/img/matchCCOEFF_NORMED-corr.jpg?raw=true">